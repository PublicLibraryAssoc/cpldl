<% if @category.errors.present? %>
  $("main p.alert").remove();
  $("main").prepend("<%= escape_javascript(render(partial: 'shared/flashes', locals: { flash: { alert: @category.errors.full_messages.join('') } })) %>")
  $(".category_name_input").addClass("field_with_errors");
<% else %>
  $("main p.alert").remove();
  $(".category_name_input").removeClass("field_with_errors");

  $("#category_rows").append("<%= escape_javascript(render(partial: 'category_row', locals: { category: @category })) %>");
  $("#category_name").val('');

  sortableTable.set_positions();
  sortableTable.init_sortables();
<% end %>
