<%= content_for(:callout) { %><h1>Admin Dashboard</h1><% } %>

<h1 class="text-color">Courses</h1>

<div class="row">
  <div class="sixcol">
    <p class="emphasis no-top-margin">
      Re-order courses on the homepage by clicking on the arrow icon to drag and drop courses. Edit by clicking the appropriate course below.
    </p>
  </div>
  <div class="sixcol last left-or-right">
    <%= link_to "Add a New Course", new_admin_course_path, class: "btn button-color" %>
  </div>
</div>

<div class="sortable-list" data-page="courses">
  <div class="list-titles">
    <div class="cell text-color">Course</div>
    <div class="cell text-color">Topic</div>
    <div class="cell text-color">Language</div>
    <div class="cell text-color">Publication Status</div>
  </div>
  <ul class="objects sortable reorderable">
    <% @courses.each do |course| %>
      <li class="sortable-item" data-id="<%= course.id %>">
        <% if top_level_domain? %>
          <div class="cell"><%= link_to course.title, edit_admin_course_path(course), class: "link-color" %></div>
        <% else %>
          <div class="cell"><%= course.title %></div>
        <% end %>
        <div class="cell"><%= course.topics_str %></div>
        <div class="cell"><%= course.language.name %></div>
        <div class="cell"><%= select_tag "course_#{course.id}", options_for_select([["Publish", "P"], ["Draft", "D"], ["Archive", "A"]], course.pub_status), data: { course_id: course.id, status: course.pub_status }, class:"course_pub small narrow", method: :patch %>
          <% unless course.pub_date.blank? %>
            <span class="note">(<%= course.pub_date.strftime("%m/%d/%Y") %>)</span>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
