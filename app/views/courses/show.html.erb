<% content_for :meta_title do %>
  <%= @course.seo_page_title.present? ? @course.seo_page_title : @course.title  %>
<% end %>
<% content_for :meta_description do %>
  <%= @course.meta_desc.present? ? @course.meta_desc : @course.summary %>
<% end %>
<% content_for :callout do %>
  <h1><%= @course.title %></h1>
<% end %>

<small><%= link_to "Courses", courses_path %> >> <%= @course.title %></small>

<div class="row">
  <div class="eightcol">
    <div class="course-details text-color">
      <div><i class="icon-pencil"></i><%= @course.lessons.published.count %> <%= t('course_page.lessons') %></div>
      <div><i class="icon-clock"></i><%= @course.duration("#{t('course_page.minutes')}") %></div>
      <div><i class="icon-plus"></i><%= t("course_page.#{@course.level.downcase}") %></div>
    </div>
    <%# TODO: Fill in dynamic link when ready %>
    <div><small><%= t('course_page.contributed_by') %> <%= @course.contributor %></small></div>
    <div><small><%= t('course_page.topics') %>: <%= @course.topics_str %></small></div>
  </div>
  
  <div class="fourcol last align-right mobile-tweak">
    <% if user_signed_in? && current_user.has_role?(:admin, current_organization) %>
      <p class="course-edit-add-remove"><small><%= link_to "Edit Course >>", edit_admin_course_path(@course) %></small></p>
    <% else %>
      <%= render partial: 'courses/course_progress_actions', locals: { course: @course } %>
    <% end %>

    <%= link_to "#{t('course_page.start_course')}", course_progresses_path(course_id: @course.id), method: :post, class: "btn button-color", data: { cpl_ga_event: "on", cpl_ga_value: "user-start-course" } %>
  </div>
</div>

<div class="show_with_bullets"><%= sanitize(@course.description) %></div>

<hr>

<h2 class="text-color"><%= t('course_page.lessons_in_this_course') %></h2>
<%= render partial: "shared/lessons/grid", locals: { course: @course } %>
<hr>

<%= render partial: "shared/courses/supplemental_materials", locals: { course: @course } %>
